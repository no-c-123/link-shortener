---
import Layout from '../layouts/Layout.astro';
import NavBar from '../components/NavBar';
---

<Layout title="API Documentation - SnapLink">
    <NavBar client:load />
    <section class="min-h-screen bg-gradient-to-br from-black to-gray-900 text-white py-20 px-4 pt-[15vh]">
        <div class="max-w-5xl mx-auto">
            <div class="mb-8">
                <h1 class="text-5xl font-bold mb-4">SnapLink API Documentation</h1>
                <p class="text-gray-400 text-lg">Build powerful integrations with the SnapLink URL shortening API</p>
            </div>

            <!-- Quick Start -->
            <div class="bg-zinc-800 rounded-lg p-8 mb-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Quick Start</h2>
                <div class="space-y-4">
                    <div>
                        <h3 class="text-xl font-semibold mb-2">1. Get Your API Key</h3>
                        <p class="text-gray-300">Visit your <a href="/account" class="text-purple-400 hover:underline">Account Dashboard</a> and navigate to the API Keys section to generate a new key.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">2. Make Your First Request</h3>
                        <p class="text-gray-300 mb-3">All API requests require your API key in the <code class="bg-zinc-900 px-2 py-1 rounded">X-API-Key</code> header.</p>
                        <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                            <pre class="text-sm"><code class="text-green-400">curl -X POST https://api.snaplink.com/shorten \
  -H "X-API-Key: your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '&lbrace;
    "url": "https://example.com/very/long/url",
    "customCode": "mylink"
  &rbrace;'</code></pre>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">3. Get Your Short URL</h3>
                        <p class="text-gray-300">The API returns your shortened URL instantly:</p>
                        <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto mt-2">
                            <pre class="text-sm"><code class="text-blue-400">&lbrace;
  "success": true,
  "shortUrl": "https://snaplink.com/mylink",
  "shortCode": "mylink",
  "originalUrl": "https://example.com/very/long/url"
&rbrace;</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Base URL -->
            <div class="bg-zinc-800 rounded-lg p-8 mb-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Base URL</h2>
                <div class="bg-zinc-900 p-4 rounded-lg">
                    <code class="text-lg text-green-400">https://api.snaplink.com</code>
                </div>
                <p class="text-gray-400 mt-3 text-sm">All endpoints are relative to this base URL.</p>
            </div>

            <!-- Authentication -->
            <div class="bg-zinc-800 rounded-lg p-8 mb-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Authentication</h2>
                <p class="text-gray-300 mb-4">Include your API key in the request header:</p>
                <div class="bg-zinc-900 p-4 rounded-lg">
                    <code class="text-yellow-400">X-API-Key: your_api_key_here</code>
                </div>
                <div class="mt-4 bg-red-900/30 border border-red-500 rounded-lg p-4">
                    <p class="text-red-300 font-semibold mb-2">⚠️ Keep Your API Key Secret</p>
                    <p class="text-gray-300 text-sm">Never expose your API key in client-side code, public repositories, or browser requests. Use it only in server-side applications.</p>
                </div>
            </div>

            <!-- Rate Limits -->
            <div class="bg-zinc-800 rounded-lg p-8 mb-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Rate Limits</h2>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">POST /shorten</h3>
                        <p class="text-gray-400">20 requests per 15 minutes</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">Other Endpoints</h3>
                        <p class="text-gray-400">100 requests per 15 minutes</p>
                    </div>
                </div>
                <p class="text-gray-300 text-sm">Rate limit info is included in response headers:</p>
                <ul class="list-disc list-inside text-gray-400 text-sm mt-2 space-y-1">
                    <li><code class="bg-zinc-900 px-2 py-1 rounded">X-RateLimit-Limit</code> - Total requests allowed</li>
                    <li><code class="bg-zinc-900 px-2 py-1 rounded">X-RateLimit-Remaining</code> - Requests remaining</li>
                    <li><code class="bg-zinc-900 px-2 py-1 rounded">X-RateLimit-Reset</code> - Time when limit resets</li>
                </ul>
            </div>

            <!-- Endpoints -->
            <div class="space-y-8">
                <h2 class="text-4xl font-bold text-purple-400">API Endpoints</h2>

                <!-- Shorten URL -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-green-700 text-white px-3 py-1 rounded font-mono text-sm">POST</span>
                        <code class="text-lg text-gray-300">/shorten</code>
                    </div>
                    <p class="text-gray-300 mb-4">Create a shortened URL</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg mb-4 overflow-x-auto">
                        <pre class="text-sm"><code class="text-blue-400">&lbrace;
  "url": "https://example.com/long/url",
  "customCode": "optional-custom-code",
  "expiresAt": "2025-12-31T23:59:59Z" // Optional
&rbrace;</code></pre>
                    </div>

                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "success": true,
  "shortUrl": "https://snaplink.com/abc123",
  "shortCode": "abc123",
  "originalUrl": "https://example.com/long/url",
  "clicks": 0,
  "expiresAt": null
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Bulk Shorten -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-green-700 text-white px-3 py-1 rounded font-mono text-sm">POST</span>
                        <code class="text-lg text-gray-300">/shorten/bulk</code>
                    </div>
                    <p class="text-gray-300 mb-4">Shorten multiple URLs at once (up to 100)</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg mb-4 overflow-x-auto">
                        <pre class="text-sm"><code class="text-blue-400">&lbrace;
  "urls": [
    &lbrace;
      "url": "https://example.com/page1",
      "customCode": "page1"
    &rbrace;,
    &lbrace;
      "url": "https://example.com/page2"
    &rbrace;
  ]
&rbrace;</code></pre>
                    </div>

                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "success": true,
  "results": [
    &lbrace;
      "success": true,
      "shortUrl": "https://snaplink.com/page1",
      "shortCode": "page1",
      "originalUrl": "https://example.com/page1"
    &rbrace;,
    &lbrace;
      "success": true,
      "shortUrl": "https://snaplink.com/def456",
      "shortCode": "def456",
      "originalUrl": "https://example.com/page2"
    &rbrace;
  ]
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Get Link Info -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-blue-700 text-white px-3 py-1 rounded font-mono text-sm">GET</span>
                        <code class="text-lg text-gray-300">/link/:shortCode</code>
                    </div>
                    <p class="text-gray-300 mb-4">Get information about a shortened link</p>
                    
                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "shortCode": "abc123",
  "originalUrl": "https://example.com/long/url",
  "clicks": 42,
  "createdAt": "2025-12-01T10:30:00Z",
  "expiresAt": null
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Get User Links -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-blue-700 text-white px-3 py-1 rounded font-mono text-sm">GET</span>
                        <code class="text-lg text-gray-300">/links</code>
                    </div>
                    <p class="text-gray-300 mb-4">Get all links created by your account</p>
                    
                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "links": [
    &lbrace;
      "id": "123",
      "shortCode": "abc123",
      "originalUrl": "https://example.com/page",
      "clicks": 15,
      "createdAt": "2025-12-01T10:30:00Z",
      "expiresAt": null
    &rbrace;
  ]
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Update Link -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-yellow-600 text-white px-3 py-1 rounded font-mono text-sm">PATCH</span>
                        <code class="text-lg text-gray-300">/links/:id</code>
                    </div>
                    <p class="text-gray-300 mb-4">Update destination URL or expiration date</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg mb-4 overflow-x-auto">
                        <pre class="text-sm"><code class="text-blue-400">&lbrace;
  "destination": "https://example.com/new-url",
  "expiresAt": "2025-12-31T23:59:59Z"
&rbrace;</code></pre>
                    </div>

                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "success": true,
  "message": "Link updated successfully",
  "link": &lbrace;
    "id": "123",
    "destination": "https://example.com/new-url",
    "expiresAt": "2025-12-31T23:59:59Z"
  &rbrace;
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Delete Link -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-red-700 text-white px-3 py-1 rounded font-mono text-sm">DELETE</span>
                        <code class="text-lg text-gray-300">/links/:id</code>
                    </div>
                    <p class="text-gray-300 mb-4">Delete a shortened link</p>
                    
                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "success": true,
  "message": "Link deleted successfully"
&rbrace;</code></pre>
                    </div>
                </div>

                <!-- Get Analytics -->
                <div class="bg-zinc-800 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-blue-700 text-white px-3 py-1 rounded font-mono text-sm">GET</span>
                        <code class="text-lg text-gray-300">/analytics/:shortCode</code>
                    </div>
                    <p class="text-gray-300 mb-4">Get detailed analytics for a link</p>
                    
                    <h4 class="font-semibold mb-2">Response</h4>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-400">&lbrace;
  "shortCode": "abc123",
  "totalClicks": 156,
  "clicksByDate": [
    &lbrace; "date": "2025-12-01", "clicks": 23 &rbrace;,
    &lbrace; "date": "2025-12-02", "clicks": 45 &rbrace;
  ],
  "topReferrers": [
    &lbrace; "source": "twitter.com", "clicks": 67 &rbrace;,
    &lbrace; "source": "facebook.com", "clicks": 34 &rbrace;
  ]
&rbrace;</code></pre>
                    </div>
                </div>
            </div>

            <!-- Error Responses -->
            <div class="bg-zinc-800 rounded-lg p-8 mt-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Error Responses</h2>
                <p class="text-gray-300 mb-4">All errors follow this format:</p>
                <div class="bg-zinc-900 p-4 rounded-lg mb-4 overflow-x-auto">
                    <pre class="text-sm"><code class="text-red-400">&lbrace;
  "error": "Error message",
  "details": "Additional error information"
&rbrace;</code></pre>
                </div>

                <h3 class="font-semibold mb-3 text-xl">Common Error Codes</h3>
                <div class="space-y-3">
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm font-mono">400</span>
                            <span class="font-semibold">Bad Request</span>
                        </div>
                        <p class="text-gray-400 text-sm">Invalid request format or missing required fields</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm font-mono">401</span>
                            <span class="font-semibold">Unauthorized</span>
                        </div>
                        <p class="text-gray-400 text-sm">Missing or invalid API key</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm font-mono">404</span>
                            <span class="font-semibold">Not Found</span>
                        </div>
                        <p class="text-gray-400 text-sm">Link or resource doesn't exist</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm font-mono">409</span>
                            <span class="font-semibold">Conflict</span>
                        </div>
                        <p class="text-gray-400 text-sm">Custom code already in use</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-yellow-600 text-white px-2 py-1 rounded text-sm font-mono">429</span>
                            <span class="font-semibold">Too Many Requests</span>
                        </div>
                        <p class="text-gray-400 text-sm">Rate limit exceeded - check headers for reset time</p>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded text-sm font-mono">500</span>
                            <span class="font-semibold">Internal Server Error</span>
                        </div>
                        <p class="text-gray-400 text-sm">Server error - contact support if persistent</p>
                    </div>
                </div>
            </div>

            <!-- Code Examples -->
            <div class="bg-zinc-800 rounded-lg p-8 mt-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Code Examples</h2>
                
                <!-- JavaScript/Node.js -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-3">JavaScript / Node.js</h3>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-blue-300">const fetch = require('node-fetch');

async function shortenUrl(longUrl, customCode) &lbrace;
  const response = await fetch('https://api.snaplink.com/shorten', &lbrace;
    method: 'POST',
    headers: &lbrace;
      'X-API-Key': 'your_api_key_here',
      'Content-Type': 'application/json'
    &rbrace;,
    body: JSON.stringify(&lbrace;
      url: longUrl,
      customCode: customCode
    &rbrace;)
  &rbrace;);

  const data = await response.json();
  console.log('Short URL:', data.shortUrl);
  return data;
&rbrace;

shortenUrl('https://example.com/long-url', 'mylink');</code></pre>
                    </div>
                </div>

                <!-- Python -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-3">Python</h3>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-green-300">import requests

def shorten_url(long_url, custom_code=None):
    response = requests.post(
        'https://api.snaplink.com/shorten',
        headers=&lbrace;
            'X-API-Key': 'your_api_key_here',
            'Content-Type': 'application/json'
        &rbrace;,
        json=&lbrace;
            'url': long_url,
            'customCode': custom_code
        &rbrace;
    )
    
    data = response.json()
    print(f"Short URL: &lbrace;data['shortUrl']&rbrace;")
    return data

shorten_url('https://example.com/long-url', 'mylink')</code></pre>
                    </div>
                </div>

                <!-- PHP -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-3">PHP</h3>
                    <div class="bg-zinc-900 p-4 rounded-lg overflow-x-auto">
                        <pre class="text-sm"><code class="text-purple-300">&lt;?php

function shortenUrl($longUrl, $customCode = null) &lbrace;
    $data = [
        'url' =&gt; $longUrl,
        'customCode' =&gt; $customCode
    ];

    $ch = curl_init('https://api.snaplink.com/shorten');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'X-API-Key: your_api_key_here',
        'Content-Type: application/json'
    ]);

    $response = curl_exec($ch);
    curl_close($ch);

    $result = json_decode($response, true);
    echo "Short URL: " . $result['shortUrl'];
    return $result;
&rbrace;

shortenUrl('https://example.com/long-url', 'mylink');

?&gt;</code></pre>
                    </div>
                </div>
            </div>

            <!-- Best Practices -->
            <div class="bg-zinc-800 rounded-lg p-8 mt-8">
                <h2 class="text-3xl font-bold mb-4 text-purple-400">Best Practices</h2>
                <ul class="space-y-3 text-gray-300">
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Store API keys securely</strong> - Use environment variables, never commit to version control
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Handle rate limits gracefully</strong> - Check response headers and implement exponential backoff
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Validate URLs before shortening</strong> - Ensure URLs are properly formatted and accessible
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Use bulk endpoints for multiple URLs</strong> - More efficient than individual requests
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Implement error handling</strong> - Always check for error responses and handle them appropriately
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <strong>Cache responses when appropriate</strong> - Reduce API calls for frequently accessed data
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Support -->
            <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-xl p-8 text-center mt-8">
                <h2 class="text-3xl font-bold mb-4">Need Help?</h2>
                <p class="text-gray-300 mb-6 text-lg">Having trouble with the API? We're here to help!</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="mailto:support@snaplink.com" class="bg-purple-700 hover:bg-purple-800 text-white px-8 py-3 rounded-lg transition inline-block font-semibold">
                        Contact Support
                    </a>
                    <a href="/faq" class="bg-gray-700 hover:bg-gray-600 text-white px-8 py-3 rounded-lg transition inline-block font-semibold">
                        View FAQ
                    </a>
                </div>
            </div>
        </div>
    </section>
</Layout>

<style>
    code {
        font-family: 'Courier New', monospace;
    }
    pre {
        white-space: pre-wrap;
        word-wrap: break-word;
    }
</style>
